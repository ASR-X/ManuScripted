<button id="new-checkpoint-button">Create</button>


<script type="text/javascript">
    var map = {};
    async function postData(url = '', data = {}) {
    // Default options are marked with *
        const response = await fetch(url, {
            method: 'POST', // *GET, POST, PUT, DELETE, etc.
            headers: {
            'Accept': 'application/json',
            'Content-Type': 'application/json'
            },
            body: JSON.stringify(data) // body data type must match "Content-Type" header
        });
        return response.json(); // parses JSON response into native JavaScript objects
    }
    function obtainDate() {
        var today = new Date();
        var dd = String(today.getDate()).padStart(2, '0');
        var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
        var yyyy = today.getFullYear();
        return yyyy + '-' + mm + '-' + dd + "T00:00:00.000Z"
    }
    var btn = document.getElementById('new-checkpoint-button');
    btn.addEventListener("click", function (e) {
            e.preventDefault()
            btn.disabled = true
            const body = {
                "name" : "Test-checkpoint-1",
                "start-date": obtainDate(),
                "due-date": "2021-03-19T00:00:00.000Z",
                "essay" : String(quill.getContents()),
                "score": "null"
            };
            console.log(body);
            postData('https://v1.nocodeapi.com/asrx/webflow/arvZVdciEcIdtZsO', body)
            .then(data => {
                console.log(data);
                map["Test-checkpoint-1"] = data["_id"];
                console.log(map);
            })
    })
    
</script>